<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Development &mdash; gammapy v0.1</title>
    
    <link rel="stylesheet" href="../_static/gammapy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://media.readthedocs.org/css/badge_only.css" type="text/css" />
    <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/underscore.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/doctools.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../_static/astropy_logo.ico"/>
    <link rel="top" title="gammapy v0.1" href="../index.html" />
    <link rel="next" title="Astrophysical source and population models (gammapy.astro)" href="../astro/index.html" />
    <link rel="prev" title="Credit" href="../credit.html" />

<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="../_static/copybutton.js"></script>


<!-- RTD Extra Head -->



<!-- 
Read the Docs is acting as the canonical URL for your project. 
If you want to change it, more info is available in our docs:
  http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="http://gammapy.readthedocs.org/en/latest/development/" />

<script type="text/javascript">
  // This is included here because other places don't have access to the pagename variable.
  var READTHEDOCS_DATA = {
    project: "gammapy",
    version: "v0.1",
    language: "en",
    page: "development/index",
    theme: "bootstrap-astropy",
    docroot: "/docs/",
    source_suffix: ".rst",
    api_host: "https://readthedocs.org",
    commit: "7060f90715048bf4b519494441a271e9b5ab78c9"
  }
  // Old variables
  var doc_version = "v0.1";
  var doc_slug = "gammapy";
  var page_name = "development/index";
  var html_theme = "bootstrap-astropy";
</script>
<!-- RTD Analytics Code -->
<!-- Included in the header because you don't have a footer block. -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17997319-1']);
  _gaq.push(['_trackPageview']);


  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- end RTD Analytics Code -->
<!-- end RTD <extrahead> -->

  </head>
  <body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">gamma</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="http://gammapy.readthedocs.io/en/v0.1/search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="../astro/index.html" title="Astrophysical source and population models (gammapy.astro)">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="../credit.html" title="Credit">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">gammapy v0.1</a>
	 &raquo;
      </li>
      
      <li>Development</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="development">
<span id="id1"></span><h1>Development<a class="headerlink" href="index.html#development" title="Permalink to this headline">¶</a></h1>
<p>This page is a collection of notes for Gammapy developers and maintainers.</p>
<p>Note that Astropy has very extensive developer documentation
<a class="reference external" href="http://astropy.readthedocs.org/en/latest/#developer-documentation">here</a>,
this page should only mention Gammapy-specific things.</p>
<div class="section" id="where-should-i-import-from">
<h2>Where should I import from?<a class="headerlink" href="index.html#where-should-i-import-from" title="Permalink to this headline">¶</a></h2>
<p>You should import from the &#8220;end-user namespaces&#8221;, not the &#8220;implementation module&#8221;.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">gammapy.data</span> <span class="kn">import</span> <span class="n">EventList</span>  <span class="c"># good</span>
<span class="kn">from</span> <span class="nn">gammapy.data.event_list</span> <span class="kn">import</span> <span class="n">EventList</span> <span class="c"># bad</span>

<span class="kn">from</span> <span class="nn">gammapy.stats</span> <span class="kn">import</span> <span class="n">cash</span>  <span class="c"># good</span>
<span class="kn">from</span> <span class="nn">gammapy.stats.fit_statistics</span> <span class="kn">import</span> <span class="n">cash</span>  <span class="c"># bad</span>
</pre></div>
</div>
<p>The end-user namespace is the location that is shown in the API docs, i.e. you can
use the Sphinx full-text search to quickly find it.</p>
<p>To make code maintenance easier, the implementation of the functions and classes is
spread across multiple modules (<tt class="xref py py-obj docutils literal"><span class="pre">py</span></tt> files), but the user shouldn&#8217;t care about their
names, that would be too much to remember.</p>
<p>The only reason to import from a module directly is if you need to access a private
function, class or variable (something that is not listed in <tt class="xref py py-obj docutils literal"><span class="pre">__all__</span></tt> and thus not
imported into the end-user namespace.</p>
<p>Note that this means that in the definition of an &#8220;end-user namespace&#8221;, e.g. in the
<tt class="docutils literal"><span class="pre">gammapy/data/__init__.py</span></tt> file, the imports have to be sorted in a way such that
modules in <tt class="docutils literal"><span class="pre">gammapy/data</span></tt> are loaded when imported from other modules in that sub-package.</p>
<div class="section" id="why-we-don-t-sub-class-other-data-classes">
<h3>Why we don&#8217;t sub-class other data classes<a class="headerlink" href="index.html#why-we-don-t-sub-class-other-data-classes" title="Permalink to this headline">¶</a></h3>
<p>We have considered re-using data classes developed by others,
namely <a class="reference external" href="http://docs.astropy.org/en/latest/api/astropy.nddata.NDData.html#astropy.nddata.NDData" title="(in Astropy v1.0.dev9682)"><tt class="xref py py-obj docutils literal"><span class="pre">NDData</span></tt></a> and the
<a class="reference external" href="http://spectral-cube.readthedocs.org/en/latest/index.html">spectral_cube.SpectralCube</a>
classes.</p>
<p>But in both cases, the data model didn&#8217;t really fit our use cases for gamma-ray astronomy
and so we decided to write our own data classes from scratch.</p>
<p>Here&#8217;s some issues where this was discussed:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/radio-astro-tools/spectral-cube/issues/110">https://github.com/radio-astro-tools/spectral-cube/issues/110</a></li>
<li><a class="reference external" href="https://github.com/astropy/astropy/pull/2855#issuecomment-52610106">https://github.com/astropy/astropy/pull/2855#issuecomment-52610106</a></li>
</ul>
</div>
</div>
<div class="section" id="python-2-and-3-support">
<span id="development-python2and3"></span><h2>Python 2 and 3 support<a class="headerlink" href="index.html#python-2-and-3-support" title="Permalink to this headline">¶</a></h2>
<p>We support Python 2.7 and 3.3 or later using a single code base.
This is the strategy adopted by most scientific Python projects and a good starting point to learn about it is
<a class="reference external" href="http://python3porting.com/noconv.html">here</a> and
<a class="reference external" href="http://astropy.readthedocs.org/en/latest/development/codeguide.html#writing-portable-code-for-python-2-and-3">here</a>.</p>
<p>For developers, it would have been nice to only support Python 3 in Gammapy.
But the CIAO and Fermi Science tools software are distributed with Python 2.7
and probably never will be updated to Python 3.
Plus many potential users will likely keep running on Python 2.7 for many years
(see e.g. <a class="reference external" href="http://ipython.org/usersurvey2013.html#python-versions">this survey</a>).</p>
<p>The decision to drop Python 2.6 and 3.2 support was made in August 2014 just before the Gammapy 0.1 release,
based on a few scientific Python user surveys on the web that show that only a small minority are still
using such an old version, so that it&#8217;s not worth the developer and maintainer effort to test
these old versions and to find workarounds for their missing features or bugs.</p>
</div>
<div class="section" id="wipe-readthedocs">
<h2>Wipe readthedocs<a class="headerlink" href="index.html#wipe-readthedocs" title="Permalink to this headline">¶</a></h2>
<p>As described <a class="reference external" href="http://read-the-docs.readthedocs.org/en/latest/builds.html#deleting-a-stale-or-broken-build-environment">here</a>,
if the docs on readthedocs show old stuff, you need to first log in <a class="reference external" href="https://readthedocs.org/accounts/login/">here</a>
and then wipe it to create a fresh / clean version by hitting <a class="reference external" href="http://readthedocs.org/wipe/gammapy/latest/">this URL</a>
and then clicking the &#8220;wipe version&#8221; button.</p>
<p>You don&#8217;t get a confirmation that the wipe has taken place, but you can check
<a class="reference external" href="https://readthedocs.org/builds/gammapy/">here</a> (wait a few minutes)
and if needed manually start a new build by going
<a class="reference external" href="https://readthedocs.org/projects/gammapy/">here</a> and clicking the &#8220;Build&#8221; button.</p>
</div>
<div class="section" id="skip-unit-tests-for-some-astropy-versions">
<h2>Skip unit tests for some Astropy versions<a class="headerlink" href="index.html#skip-unit-tests-for-some-astropy-versions" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">astropy</span>
<span class="kn">from</span> <span class="nn">astropy.tests.helper</span> <span class="kn">import</span> <span class="n">pytest</span>

<span class="n">ASTROPY_VERSION</span> <span class="o">=</span> <span class="p">(</span><span class="n">astropy</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">major</span><span class="p">,</span> <span class="n">astropy</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">minor</span><span class="p">)</span>
<span class="nd">@pytest.mark.xfail</span><span class="p">(</span><span class="n">ASTROPY_VERSION</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">reason</span><span class="o">=</span><span class="s">&quot;Astropy API change&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_something</span><span class="p">():</span>
   <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="make-a-gammapy-release">
<h2>Make a Gammapy release<a class="headerlink" href="index.html#make-a-gammapy-release" title="Permalink to this headline">¶</a></h2>
<p>For now, see <a class="reference external" href="https://github.com/astropy/package-template/issues/103">https://github.com/astropy/package-template/issues/103</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="index.html#">Development</a><ul>
<li><a class="reference internal" href="index.html#where-should-i-import-from">Where should I import from?</a><ul>
<li><a class="reference internal" href="index.html#why-we-don-t-sub-class-other-data-classes">Why we don&#8217;t sub-class other data classes</a></li>
</ul>
</li>
<li><a class="reference internal" href="index.html#python-2-and-3-support">Python 2 and 3 support</a></li>
<li><a class="reference internal" href="index.html#wipe-readthedocs">Wipe readthedocs</a></li>
<li><a class="reference internal" href="index.html#skip-unit-tests-for-some-astropy-versions">Skip unit tests for some Astropy versions</a></li>
<li><a class="reference internal" href="index.html#make-a-gammapy-release">Make a Gammapy release</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/development/index.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="index.html#">Back to Top</a></p>
  <p>
    &copy; Copyright 2014, The Gammapy developers.<br/>
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2. &nbsp;
    Last built 27 Aug 2014. <br/>
  </p>
</footer>
  </body>
</html>